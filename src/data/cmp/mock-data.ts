import type { CmpControlDetail } from "./types";

export const mockCmpControls: CmpControlDetail[] = [
  {
    id: "CMP-001",
    title: "Target Market & Client Segmentation",
    objective: "Ensure advice is only provided to target customers with documented needs",
    owner: "Rory Finch",
    backupOwner: "Leila Burns",
    frequency: "quarterly",
    nextTestDue: new Date(Date.now() + 1000 * 60 * 60 * 24 * 28).toISOString(),
    lastTestedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 60).toISOString(),
    status: "active",
    ragStatus: "green",
    passRate: 0.92,
    automationCoverage: 0.35,
    dutyOutcome: "Products & Services",
    regulatoryReferences: ["FG22/5", "PRIN 2A"],
    linkedRisks: [
      { riskId: "RA-001", title: "Third-party payment processor outage", inherentScore: 16, residualScore: 9 },
      { riskId: "RA-003", title: "Consumer duty communications", inherentScore: 8, residualScore: 6 },
    ],
    consumerDutyNotes: "Quarterly reviews align to Consumer Duty outcome testing.",
    criticality: "high",
    testsPlanned: 5,
    testsExecuted: 4,
    issuesOpen: 1,
    trend: "improving",
    controlType: "preventative",
    dependencies: ["Product Governance Committee", "CRM Workflow"],
    dataSources: ["Salesforce", "Client File Share"],
    testPlan: [
      {
        id: "CMP-001-STEP-1",
        stepNumber: 1,
        objective: "Validate target market statements",
        procedure: "Review latest target market articulation for clarity",
        sampleSize: 10,
        dataSource: "Product governance minutes",
        evidenceLocation: "SharePoint/Controls/CMP001",
        automation: false,
        technique: "inspection",
        expectedResult: "Target market language updated within last quarter",
      },
      {
        id: "CMP-001-STEP-2",
        stepNumber: 2,
        objective: "Check negative target market controls",
        procedure: "Inspect suitability letters for exclusion statements",
        sampleSize: 12,
        dataSource: "Suitability letters",
        evidenceLocation: "SharePoint/Controls/CMP001",
        automation: true,
        technique: "analytics",
        expectedResult: "100% of sampled letters include explicit exclusions",
      },
    ],
    executions: [
      {
        id: "CMP-001-EXEC-1",
        stepId: "CMP-001-STEP-1",
        tester: "Robin Cole",
        reviewer: "Rory Finch",
        testedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 30).toISOString(),
        result: "pass",
        sampleSize: 10,
        comments: "All statements refreshed in September",
      },
      {
        id: "CMP-001-EXEC-2",
        stepId: "CMP-001-STEP-2",
        tester: "John Patel",
        reviewer: "Rory Finch",
        testedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 32).toISOString(),
        result: "partial",
        sampleSize: 12,
        comments: "2 letters missing exclusions",
      },
    ],
    findings: [
      {
        id: "CMP-001-F001",
        title: "Suitability template missing exclusion field",
        description: "Legacy template does not force advisers to capture negative target market",
        severity: "high",
        status: "in_progress",
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 24 * 21).toISOString(),
        owner: "Leila Burns",
        rootCause: "Template governance gap",
        businessImpact: "Potential Consumer Duty breach",
        interimControls: "Manual QA review",
        relatedTestId: "CMP-001-EXEC-2",
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 25).toISOString(),
      },
    ],
    kris: [
      {
        id: "CMP-001-KRI-1",
        name: "Files with clear target market",
        metric: "% of files",
        target: 95,
        actual: 92,
        status: "amber",
        commentary: "Two advisers onboarded recently require refresher",
      },
    ],
    notes: "Continue automation proof-of-concept for suitability scanning.",
  },
  {
    id: "CMP-007",
    title: "Suitability Report Process",
    objective: "Evidence suitability reasoning and Consumer Duty fairness",
    owner: "Ifeoma Kalu",
    backupOwner: "Rory Finch",
    frequency: "monthly",
    nextTestDue: new Date(Date.now() + 1000 * 60 * 60 * 24 * 7).toISOString(),
    lastTestedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 20).toISOString(),
    status: "active",
    ragStatus: "amber",
    passRate: 0.78,
    automationCoverage: 0.5,
    dutyOutcome: "Consumer Understanding",
    regulatoryReferences: ["COBS 9.4", "FG11/5"],
    linkedRisks: [{ riskId: "RA-003", title: "Consumer duty communications", inherentScore: 8, residualScore: 6 }],
    criticality: "critical",
    testsPlanned: 6,
    testsExecuted: 6,
    issuesOpen: 2,
    trend: "declining",
    controlType: "detective",
    dependencies: ["Advice QA", "DocuSign templates", "Advice MI"],
    dataSources: ["Advice platform", "SharePoint"],
    testPlan: [
      {
        id: "CMP-007-STEP-1",
        stepNumber: 1,
        objective: "Check suitability rationale completeness",
        procedure: "Review sample of reports",
        sampleSize: 15,
        dataSource: "Advice MI",
        evidenceLocation: "SharePoint/CMP007",
        automation: false,
        technique: "inspection",
        expectedResult: "All reports include capacity for loss",
      },
      {
        id: "CMP-007-STEP-2",
        stepNumber: 2,
        objective: "Verify Consumer Duty statement",
        procedure: "Keyword scan to confirm customer outcome statement",
        sampleSize: 30,
        dataSource: "Advice platform",
        evidenceLocation: "SharePoint/CMP007",
        automation: true,
        technique: "analytics",
        expectedResult: ">= 95% of reports include Consumer Duty paragraph",
      },
    ],
    executions: [
      {
        id: "CMP-007-EXEC-1",
        stepId: "CMP-007-STEP-1",
        tester: "Devon Lowe",
        reviewer: "Ifeoma Kalu",
        testedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 20).toISOString(),
        result: "fail",
        sampleSize: 15,
        comments: "3 reports lacked capacity for loss analysis",
      },
      {
        id: "CMP-007-EXEC-2",
        stepId: "CMP-007-STEP-2",
        tester: "Devon Lowe",
        reviewer: "Ifeoma Kalu",
        testedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 18).toISOString(),
        result: "pass",
        sampleSize: 30,
        comments: "Automation flagged two issues automatically",
      },
    ],
    findings: [
      {
        id: "CMP-007-F002",
        title: "Capacity for loss narrative missing",
        description: "Reports do not adequately explain CFL assessment",
        severity: "critical",
        status: "open",
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 24 * 14).toISOString(),
        owner: "Devon Lowe",
        rootCause: "Training gap",
        businessImpact: "FCA supervision attention",
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 10).toISOString(),
      },
      {
        id: "CMP-007-F003",
        title: "Consumer Duty template not enforced",
        description: "Templates allow advisers to delete duty statement",
        severity: "high",
        status: "in_progress",
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 24 * 30).toISOString(),
        owner: "Leila Burns",
        rootCause: "Template version control",
        businessImpact: "Inconsistent disclosures",
        interimControls: "Weekly QA",
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 5).toISOString(),
      },
    ],
    kris: [
      { id: "CMP-007-KRI-1", name: "Reports with CFL detail", metric: "%", target: 95, actual: 82, status: "red" },
      { id: "CMP-007-KRI-2", name: "Duty statements present", metric: "%", target: 98, actual: 97, status: "green" },
    ],
  },
  {
    id: "CMP-016",
    title: "AML & Financial Crime",
    objective: "Detect suspicious activity via surveillance and casework",
    owner: "Regina Miles",
    backupOwner: "Tomas Igbene",
    frequency: "monthly",
    nextTestDue: new Date(Date.now() + 1000 * 60 * 60 * 24 * 5).toISOString(),
    lastTestedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 25).toISOString(),
    status: "active",
    ragStatus: "green",
    passRate: 0.88,
    automationCoverage: 0.65,
    dutyOutcome: "Price & Value",
    regulatoryReferences: ["MLR 2017", "SYSC 6.3"],
    linkedRisks: [{ riskId: "RA-002", title: "Financial crime monitoring gaps", inherentScore: 15, residualScore: 8 }],
    criticality: "high",
    testsPlanned: 4,
    testsExecuted: 4,
    issuesOpen: 0,
    trend: "steady",
    controlType: "detective",
    dependencies: ["Transaction Monitoring", "Case Manager"],
    dataSources: ["TM platform", "SAR casework"],
    testPlan: [
      {
        id: "CMP-016-STEP-1",
        stepNumber: 1,
        objective: "Scenario tuning review",
        procedure: "Re-perform tuning analysis for top scenarios",
        sampleSize: 3,
        dataSource: "TM tuning dashboards",
        evidenceLocation: "SharePoint/CMP016",
        automation: false,
        technique: "re-performance",
        expectedResult: "Documented rationale for thresholds",
      },
      {
        id: "CMP-016-STEP-2",
        stepNumber: 2,
        objective: "Case closure quality",
        procedure: "Inspect closed case files",
        sampleSize: 20,
        dataSource: "Case Management",
        evidenceLocation: "SharePoint/CMP016",
        automation: false,
        technique: "inspection",
        expectedResult: "All cases include reviewer sign-off",
      },
    ],
    executions: [
      {
        id: "CMP-016-EXEC-1",
        stepId: "CMP-016-STEP-1",
        tester: "Mina Onyen",
        reviewer: "Regina Miles",
        testedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 25).toISOString(),
        result: "pass",
        sampleSize: 3,
        comments: "Tuning thresholds justified",
      },
      {
        id: "CMP-016-EXEC-2",
        stepId: "CMP-016-STEP-2",
        tester: "Mina Onyen",
        reviewer: "Regina Miles",
        testedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 24).toISOString(),
        result: "pass",
        sampleSize: 20,
        comments: "Reviewer sign-off present",
      },
    ],
    findings: [],
    kris: [
      { id: "CMP-016-KRI-1", name: "Cases with reviewer sign-off", metric: "%", target: 100, actual: 100, status: "green" },
      { id: "CMP-016-KRI-2", name: "SAR backlog", metric: "days", target: 3, actual: 2, status: "green" },
    ],
  },
];
